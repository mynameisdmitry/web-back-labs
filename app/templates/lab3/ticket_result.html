{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 3{% endblock %}

{% block main %}
<div class="ticket-result-container">
    <h1>üé´ –í–∞—à –∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π –±–∏–ª–µ—Ç</h1>
    
    <div class="ticket">
        <div class="ticket-header">
            <h2>–†–ñ–î - –†–æ—Å—Å–∏–π—Å–∫–∏–µ –∂–µ–ª–µ–∑–Ω—ã–µ –¥–æ—Ä–æ–≥–∏</h2>
            <div class="ticket-type">
                {% set age_int = age | int %}
                {% if age_int < 18 %}
                <span class="child-ticket">–î–µ—Ç—Å–∫–∏–π –±–∏–ª–µ—Ç</span>
                {% else %}
                <span class="adult-ticket">–í–∑—Ä–æ—Å–ª—ã–π –±–∏–ª–µ—Ç</span>
                {% endif %}
            </div>
        </div>

        <div class="ticket-body">
            <div class="passenger-info">
                <h3>üë§ –ü–∞—Å—Å–∞–∂–∏—Ä</h3>
                <p><strong>–§–ò–û:</strong> {{ fio }}</p>
                <p><strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> {{ age }} –ª–µ—Ç</p>
            </div>

            <div class="route-info">
                <h3>–ú–∞—Ä—à—Ä—É—Ç</h3>
                <p><strong>–û—Ç–∫—É–¥–∞:</strong> {{ departure }}</p>
                <p><strong>–ö—É–¥–∞:</strong> {{ destination }}</p>
                <p><strong>–î–∞—Ç–∞:</strong> {{ date }}</p>
            </div>

            <div class="service-info">
                <h3>–£—Å–ª—É–≥–∏</h3>
                <p><strong>–ü–æ–ª–∫–∞:</strong> 
                    {% if shelf == 'lower' %}–ù–∏–∂–Ω—è—è
                    {% elif shelf == 'upper' %}–í–µ—Ä—Ö–Ω—è—è
                    {% elif shelf == 'upper-side' %}–í–µ—Ä—Ö–Ω—è—è –±–æ–∫–æ–≤–∞—è
                    {% elif shelf == 'lower-side' %}–ù–∏–∂–Ω—è—è –±–æ–∫–æ–≤–∞—è
                    {% endif %}
                </p>
                <p><strong>–ë–µ–ª—å—ë:</strong> {{ '–î–∞' if linen == 'on' else '–ù–µ—Ç' }}</p>
                <p><strong>–ë–∞–≥–∞–∂:</strong> {{ '–î–∞' if baggage == 'on' else '–ù–µ—Ç' }}</p>
                <p><strong>–°—Ç—Ä–∞—Ö–æ–≤–∫–∞:</strong> {{ '–î–∞' if insurance == 'on' else '–ù–µ—Ç' }}</p>
            </div>

            <div class="price-info">
                <h3>–°—Ç–æ–∏–º–æ—Å—Ç—å</h3>
                {% set age_int = age | int %}
                {% if age_int < 18 %}
                    {% set base_price = 700 %}
                    <p>–î–µ—Ç—Å–∫–∏–π –±–∏–ª–µ—Ç: 700 —Ä—É–±.</p>
                {% else %}
                    {% set base_price = 1000 %}
                    <p>–í–∑—Ä–æ—Å–ª—ã–π –±–∏–ª–µ—Ç: 1000 —Ä—É–±.</p>
                {% endif %}

                {% set additional_price = 0 %}
                {% if shelf == 'lower' or shelf == 'lower-side' %}
                    {% set additional_price = additional_price + 100 %}
                    <p>–ù–∏–∂–Ω—è—è –ø–æ–ª–∫–∞: +100 —Ä—É–±.</p>
                {% endif %}
                
                {% if linen == 'on' %}
                    {% set additional_price = additional_price + 75 %}
                    <p>–ü–æ—Å—Ç–µ–ª—å–Ω–æ–µ –±–µ–ª—å—ë: +75 —Ä—É–±.</p>
                {% endif %}
                
                {% if baggage == 'on' %}
                    {% set additional_price = additional_price + 250 %}
                    <p>–ë–∞–≥–∞–∂: +250 —Ä—É–±.</p>
                {% endif %}
                
                {% if insurance == 'on' %}
                    {% set additional_price = additional_price + 150 %}
                    <p>–°—Ç—Ä–∞—Ö–æ–≤–∫–∞: +150 —Ä—É–±.</p>
                {% endif %}

                {% set total_price = base_price + additional_price %}
                <div class="total-price">
                    <strong>–ò—Ç–æ–≥–æ: {{ total_price }} —Ä—É–±.</strong>
                </div>
            </div>
        </div>

        <div class="ticket-footer">
            <p>–ë–∏–ª–µ—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ! –ü—Ä–∏—è—Ç–Ω–æ–π –ø–æ–µ–∑–¥–∫–∏!</p>
        </div>
    </div>

    <div class="ticket-actions">
        <a href="/lab3/ticket" class="new-ticket-button">–û—Ñ–æ—Ä–º–∏—Ç—å –Ω–æ–≤—ã–π –±–∏–ª–µ—Ç</a>
        <a href="/lab3" class="back-button">‚Üê –ù–∞–∑–∞–¥ –∫ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π</a>
    </div>
</div>
{% endblock %}