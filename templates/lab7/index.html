{% extends "base.html" %}

{% block lab %}Лабораторная работа 7{% endblock %}



{% block main %}
<div class="card">
    <div class="page-header">
        <h1>Лабораторная работа 7</h1>
        <p>REST API: получение списка фильмов, получение одного фильма и удаление фильма (DELETE).</p>
    </div>

    <div class="highlight" style="margin-top: 18px;">
        <p><strong>Эндпоинты:</strong></p>
        <ul style="margin-top: 10px;">
            <li>
                <span class="route-path">GET /lab7/rest-api/films/</span>
                <span class="route-desc">— получить список всех фильмов</span>
            </li>
            <li>
                <span class="route-path">GET /lab7/rest-api/films/&lt;id&gt;</span>
                <span class="route-desc">— получить фильм по индексу (нумерация с 0)</span>
            </li>
            <li>
                <span class="route-path">DELETE /lab7/rest-api/films/&lt;id&gt;</span>
                <span class="route-desc">— удалить фильм по индексу (ответ 204 No Content)</span>
            </li>
        </ul>
    </div>

    <div style="margin-top: 18px;">
        <a class="btn" href="/lab7/rest-api/films/" target="_blank">Открыть список фильмов (JSON)</a>
        <a class="btn" href="/lab7/rest-api/films/0" target="_blank">Открыть фильм #0</a>

    </div>

    <div class="highlight" style="margin-top: 18px;">
        <p><strong>Как проверить DELETE:</strong></p>
        <p>
            Через адресную строку браузера DELETE не отправить. Откройте DevTools → Console
            (важно: находясь на странице вашего сайта, например <span class="route-path">/lab7</span>),
            и выполните команду:
        </p>

        <div class="code">fetch('/lab7/rest-api/films/0', { method: 'DELETE' })</div>

        <p>
            Должен вернуться ответ со статусом <strong>204</strong> и без тела.
            После этого обновите список:
        </p>

        <div class="code">fetch('/lab7/rest-api/films/').then(r =&gt; r.json()).then(console.log)</div>

        <p>
            Если попытаться удалить несуществующий индекс (например, 87), сервер вернёт <strong>404</strong>.
        </p>
    </div>
</div>
{% endblock %}
