<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Дмитрий Игуменшев. {% block lab %}{% endblock %}</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}?v=3.0">

  <!-- favicon: положите файл в /static/favicon.ico -->
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" sizes="any">
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

  <meta name="theme-color" content="#0b1020">

  <!-- Cookie overrides (в HEAD, чтобы VS Code не ругался на inline style у body) -->
  <style>
    body{
      {% if request.cookies.get('color') %}color: {{ request.cookies.get('color') }};{% endif %}
      {% if request.cookies.get('background_color') %}background-color: {{ request.cookies.get('background_color') }};{% endif %}
      {% if request.cookies.get('font_size') %}font-size: {{ request.cookies.get('font_size') }}px;{% endif %}
      {% if request.cookies.get('font_family') %}font-family: {{ request.cookies.get('font_family') }};{% endif %}
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="container site-header__inner">
      <div class="brand">
        <div class="brand__top">
          <div class="brand__logo" aria-hidden="true"></div>
          <div class="brand__title">WEB-программирование, часть 2. {{ self.lab() }}</div>
        </div>
        <div class="brand__subtitle">ЛР-5 — база знаний (CRUD + авторизация)</div>
      </div>

      <nav class="nav">
        <a class="nav__link" href="/">Главная</a>
        <a class="nav__link" href="{{ url_for('lab5.lab') }}">ЛР-5</a>
        <a class="nav__link" href="{{ url_for('lab5.list_articles') }}">Статьи</a>

        {% if session.get('login') %}
          <span class="badge" title="Вы авторизованы">
            <span class="badge__dot" aria-hidden="true"></span>
            {{ session.get('login') }}
          </span>
          <a class="nav__link" href="{{ url_for('lab5.logout') }}">Выйти</a>
        {% else %}
          <a class="nav__link" href="{{ url_for('lab5.login') }}">Войти</a>
          <a class="nav__link" href="{{ url_for('lab5.register') }}">Регистрация</a>
        {% endif %}
      </nav>
    </div>
  </header>

  <div class="page">
    <div class="container">
      <div class="shell">
        <main class="main">
          {% block main %}{% endblock %}
        </main>

        <footer class="footer">
          <div>&copy; Дмитрий Игуменшев, ФБИ-33, 3 курс, 2025</div>
          <div>Лабораторная работа 5</div>
        </footer>
      </div>
    </div>
  </div>
</body>
</html>
